# è·¯ç”±å†²çªä¿®å¤è¯´æ˜

## ğŸ› é—®é¢˜æè¿°

### é”™è¯¯ä¿¡æ¯
```
java.lang.IllegalStateException: Ambiguous mapping. Cannot map 'TeacherCourseExamController' method 
public com.mindskip.xzs.base.RestResponse<java.util.List<com.mindskip.xzs.viewmodel.teacher.CourseExamResponseVM>> com.mindskip.xzs.controller.teacher.TeacherCourseExamController.getExamList(java.lang.Long)
to {GET /api/teacher/courses/{courseId}/exams}: There is already 'TeacherExamController' bean method
public com.mindskip.xzs.base.RestResponse<java.util.List<com.mindskip.xzs.viewmodel.teacher.exam.CourseExamResponseVM>> com.mindskip.xzs.controller.teacher.ExamController.getExamList(java.lang.Long) mapped.
```

### é—®é¢˜åˆ†æ
Spring Boot æ£€æµ‹åˆ°ä¸¤ä¸ªæ§åˆ¶å™¨æœ‰ç›¸åŒçš„è·¯ç”±æ˜ å°„ï¼Œå¯¼è‡´è·¯ç”±å†²çªï¼š

1. **TeacherCourseExamController** 
   - ç±»çº§åˆ«æ˜ å°„ï¼š`@RequestMapping("/api/teacher/courses")`
   - æ–¹æ³•æ˜ å°„ï¼š`@GetMapping("/{courseId}/exams")`
   - å®Œæ•´è·¯å¾„ï¼š`GET /api/teacher/courses/{courseId}/exams`

2. **ExamController** (TeacherExamController)
   - ç±»çº§åˆ«æ˜ å°„ï¼š`@RequestMapping("/api/teacher/courses")`  
   - æ–¹æ³•æ˜ å°„ï¼š`@GetMapping("/{courseId}/exams")`
   - å®Œæ•´è·¯å¾„ï¼š`GET /api/teacher/courses/{courseId}/exams`

### å†²çªçš„è·¯ç”±
ä¸¤ä¸ªæ§åˆ¶å™¨éƒ½å®šä¹‰äº†ä»¥ä¸‹ç›¸åŒçš„è·¯ç”±ï¼š
- `GET /api/teacher/courses/{courseId}/exams` - è·å–æµ‹éªŒåˆ—è¡¨
- `GET /api/teacher/courses/{courseId}/exams/{examId}` - è·å–æµ‹éªŒè¯¦æƒ…
- `GET /api/teacher/courses/{courseId}/exams/{examId}/statistics` - è·å–æµ‹éªŒç»Ÿè®¡

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### åˆ é™¤é‡å¤æ§åˆ¶å™¨
åˆ é™¤äº†é‡å¤çš„ `TeacherCourseExamController.java` æ–‡ä»¶ï¼Œä¿ç•™åŠŸèƒ½æ›´å®Œæ•´çš„ `ExamController.java`ã€‚

### ä¿ç•™çš„æ§åˆ¶å™¨åŠŸèƒ½
**ExamController** (`@RestController("TeacherExamController")`) æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

#### 1. æµ‹éªŒç®¡ç†
- `GET /{courseId}/exams` - è·å–è¯¾ç¨‹æµ‹éªŒåˆ—è¡¨
- `GET /{courseId}/exams/{examId}` - è·å–æµ‹éªŒè¯¦æƒ…
- `POST /{courseId}/exams` - åˆ›å»ºæ–°æµ‹éªŒ
- `PUT /{courseId}/exams/{examId}` - æ›´æ–°æµ‹éªŒ
- `DELETE /{courseId}/exams/{examId}` - åˆ é™¤æµ‹éªŒ

#### 2. æˆç»©ç®¡ç†
- `GET /{courseId}/exams/{examId}/results` - è·å–æµ‹éªŒæˆç»©åˆ—è¡¨
- `GET /{courseId}/exams/{examId}/statistics` - è·å–æµ‹éªŒç»Ÿè®¡ä¿¡æ¯

#### 3. è¯•å·ç®¡ç†
- `GET /{courseId}/papers` - è·å–å¯ç”¨è¯•å·åˆ—è¡¨

#### 4. ç­”å·ç®¡ç†
- `GET /{courseId}/exams/{examId}/answers` - è·å–ç­”å·åˆ—è¡¨
- `POST /{courseId}/exams/{examId}/answers/{answerId}/evaluate` - è¯„é˜…ç­”å·

### æƒé™éªŒè¯
æ‰€æœ‰æ–¹æ³•éƒ½åŒ…å«æ•™å¸ˆæƒé™éªŒè¯ï¼š
```java
// éªŒè¯è¯¥è¯¾ç¨‹æ˜¯å¦å±äºå½“å‰æ•™å¸ˆ
if (!teacherCourseService.validateTeacherCourse(currentUser.getId(), courseId)) {
    return RestResponse.fail(403, "æ²¡æœ‰æƒé™");
}
```

## âœ… ä¿®å¤ç»“æœ

### è§£å†³çš„é—®é¢˜
- âœ… è·¯ç”±å†²çªå·²è§£å†³
- âœ… Spring Boot åº”ç”¨å¯ä»¥æ­£å¸¸å¯åŠ¨
- âœ… ä¿ç•™äº†å®Œæ•´çš„æµ‹éªŒç®¡ç†åŠŸèƒ½
- âœ… ä¿æŒäº†æƒé™éªŒè¯æœºåˆ¶

### API è·¯ç”±æ˜ å°„
ä¿®å¤åçš„ API è·¯ç”±ç»“æ„ï¼š

```
æ•™å¸ˆç«¯æµ‹éªŒç®¡ç† API:
â”œâ”€â”€ GET    /api/teacher/courses/{courseId}/exams                    # è·å–æµ‹éªŒåˆ—è¡¨
â”œâ”€â”€ POST   /api/teacher/courses/{courseId}/exams                    # åˆ›å»ºæµ‹éªŒ
â”œâ”€â”€ GET    /api/teacher/courses/{courseId}/exams/{examId}           # è·å–æµ‹éªŒè¯¦æƒ…
â”œâ”€â”€ PUT    /api/teacher/courses/{courseId}/exams/{examId}           # æ›´æ–°æµ‹éªŒ
â”œâ”€â”€ DELETE /api/teacher/courses/{courseId}/exams/{examId}           # åˆ é™¤æµ‹éªŒ
â”œâ”€â”€ GET    /api/teacher/courses/{courseId}/exams/{examId}/results   # è·å–æˆç»©åˆ—è¡¨
â”œâ”€â”€ GET    /api/teacher/courses/{courseId}/exams/{examId}/statistics # è·å–ç»Ÿè®¡ä¿¡æ¯
â”œâ”€â”€ GET    /api/teacher/courses/{courseId}/papers                   # è·å–å¯ç”¨è¯•å·
â”œâ”€â”€ GET    /api/teacher/courses/{courseId}/exams/{examId}/answers   # è·å–ç­”å·åˆ—è¡¨
â””â”€â”€ POST   /api/teacher/courses/{courseId}/exams/{examId}/answers/{answerId}/evaluate # è¯„é˜…ç­”å·
```

## ğŸ§ª æµ‹è¯•å»ºè®®

### 1. å¯åŠ¨æµ‹è¯•
```bash
# å¯åŠ¨åç«¯åº”ç”¨
mvn spring-boot:run
```
åº”è¯¥çœ‹åˆ°åº”ç”¨æ­£å¸¸å¯åŠ¨ï¼Œæ²¡æœ‰è·¯ç”±å†²çªé”™è¯¯ã€‚

### 2. API æµ‹è¯•
ä½¿ç”¨ Postman æˆ–å…¶ä»–å·¥å…·æµ‹è¯•ä»¥ä¸‹ APIï¼š
- è·å–æµ‹éªŒåˆ—è¡¨ï¼š`GET /api/teacher/courses/1/exams`
- è·å–æµ‹éªŒè¯¦æƒ…ï¼š`GET /api/teacher/courses/1/exams/1`
- åˆ›å»ºæµ‹éªŒï¼š`POST /api/teacher/courses/1/exams`

### 3. å‰ç«¯é›†æˆæµ‹è¯•
ç¡®è®¤å‰ç«¯é¡µé¢å¯ä»¥æ­£å¸¸è°ƒç”¨è¿™äº› APIï¼š
- æ•™å¸ˆæµ‹éªŒç®¡ç†é¡µé¢
- æµ‹éªŒåˆ›å»º/ç¼–è¾‘åŠŸèƒ½
- æˆç»©æŸ¥çœ‹åŠŸèƒ½

## ğŸ“ æ³¨æ„äº‹é¡¹

### 1. å‰ç«¯ API è°ƒç”¨
ç¡®ä¿å‰ç«¯ä»£ç è°ƒç”¨çš„æ˜¯æ­£ç¡®çš„ API è·¯å¾„ï¼š
```javascript
// æ­£ç¡®çš„ API è°ƒç”¨
teacherExamApi.getExamList(courseId)  // GET /api/teacher/courses/{courseId}/exams
teacherExamApi.getExam(courseId, examId)  // GET /api/teacher/courses/{courseId}/exams/{examId}
```

### 2. æƒé™æ§åˆ¶
æ‰€æœ‰ API éƒ½éœ€è¦ï¼š
- ç”¨æˆ·å·²ç™»å½•
- ç”¨æˆ·æ˜¯æ•™å¸ˆè§’è‰²
- æ•™å¸ˆæœ‰è¯¥è¯¾ç¨‹çš„ç®¡ç†æƒé™

### 3. æ•°æ®ä¸€è‡´æ€§
åˆ é™¤æ§åˆ¶å™¨ä¸ä¼šå½±å“æ•°æ®åº“ç»“æ„ï¼Œæ‰€æœ‰ç›¸å…³çš„æ•°æ®è¡¨å’Œå…³ç³»ä¿æŒä¸å˜ã€‚

### 4. ä»£ç ç»´æŠ¤
- é¿å…åˆ›å»ºé‡å¤çš„æ§åˆ¶å™¨
- ä½¿ç”¨æ˜ç¡®çš„è·¯ç”±æ˜ å°„
- ä¿æŒ API è®¾è®¡çš„ä¸€è‡´æ€§

## ğŸ”„ åç»­ä¼˜åŒ–å»ºè®®

1. **API æ–‡æ¡£**ï¼šä½¿ç”¨ Swagger ç”Ÿæˆ API æ–‡æ¡£
2. **å•å…ƒæµ‹è¯•**ï¼šä¸ºæ§åˆ¶å™¨æ–¹æ³•æ·»åŠ å•å…ƒæµ‹è¯•
3. **é›†æˆæµ‹è¯•**ï¼šæ·»åŠ  API é›†æˆæµ‹è¯•
4. **é”™è¯¯å¤„ç†**ï¼šç»Ÿä¸€å¼‚å¸¸å¤„ç†æœºåˆ¶
5. **æ—¥å¿—è®°å½•**ï¼šæ·»åŠ æ“ä½œæ—¥å¿—è®°å½•

ä¿®å¤å®Œæˆåï¼Œåº”ç”¨åº”è¯¥å¯ä»¥æ­£å¸¸å¯åŠ¨å’Œè¿è¡Œï¼
